<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识库管理 - AI智能体平台</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-50: #e6f7ee;
            --primary-100: #c2ebd6;
            --primary-200: #9bdfbd;
            --primary-300: #70d3a3;
            --primary-400: #4dc98f;
            --primary-500: #1fbf7b;
            --primary-600: #16af6f;
            --primary-700: #0a9c60;
            --primary-800: #008a52;
            --primary-900: #006a3a;

            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-700: #374151;
            --gray-900: #111827;

            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Noto Sans SC', sans-serif;
        }

        body {
            background-color: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.5;
            height: 100vh;
            overflow: hidden;
        }

        /* 导航栏样式 */
        .navbar {
            background: linear-gradient(135deg, var(--primary-700), var(--primary-900));
            color: white;
            padding: 0.75rem 1.5rem;
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-icon {
            background-color: white;
            color: var(--primary-700);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: white;
            background-color: rgba(255, 255, 255, 0.15);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            background-color: rgba(255, 255, 255, 0.15);
            border: none;
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border-radius: 20px;
            color: white;
            width: 200px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.25);
            width: 250px;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
        }

        /* 主内容区 */
        .main-container {
            display: flex;
            max-width: 1400px;
            margin: 2rem auto;
            height: calc(100vh - 120px);
            padding: 0 1.5rem;
            gap: 1.5rem;
        }

        /* 侧边栏 */
        .sidebar {
            width: 260px;
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            padding: 1.5rem;
            height: 100%;
            overflow-y: auto;
        }

        .sidebar-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-800);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-menu {
            list-style: none;
        }

        .menu-item {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .menu-item:hover {
            background-color: var(--primary-50);
        }

        .menu-item.active {
            background-color: var(--primary-100);
            color: var(--primary-800);
            font-weight: 500;
        }

        .menu-item i {
            width: 24px;
            text-align: center;
        }

        /* 内容区 */
        .content {
            flex: 1;
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            padding: 1.5rem;
            height: 100%;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .content-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-800);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .content-title i {
            background-color: var(--primary-100);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-700);
        }

        /* 操作栏 */
        .action-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .search-form {
            display: flex;
            gap: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
            color: white;
            border: none;
            padding: 0.4rem 1.2rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* 表格样式 */
        .advisor-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }

        .advisor-table th {
            background-color: var(--primary-50);
            color: var(--primary-800);
            text-align: left;
            padding: 0.75rem 1rem;
            font-weight: 600;
            border-bottom: 1px solid var(--gray-200);
        }

        .advisor-table th:nth-child(1) { width: 6%; } /* ID */
        .advisor-table th:nth-child(2) { width: 20%; } /* 顾问名称 */
        .advisor-table th:nth-child(3) { width: 15%; } /* 顾问类型 */
        .advisor-table th:nth-child(4) { width: 8%; }  /* 顺序号 */
        .advisor-table th:nth-child(5) { width: 10%; } /* 向量库ID */
        .advisor-table th:nth-child(6) { width: 10%; } /* 模型ID */
        .advisor-table th:nth-child(7) { width: 8%; }  /* 状态 */
        .advisor-table th:nth-child(8) { width: 15%; } /* 创建时间 */
        .advisor-table th:nth-child(9) { width: 50%; } /* 操作 */

        .advisor-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .advisor-table tr:hover {
            background-color: var(--gray-50);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-enabled {
            background-color: var(--primary-100);
            color: var(--primary-700);
        }

        .status-disabled {
            background-color: #fde8e8;
            color: #e53e3e;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid var(--gray-200);
            background-color: white;
        }

        .action-btn:hover {
            background-color: var(--gray-100);
        }

        .btn-edit {
            padding: 0.1rem 0.9rem;
            color: var(--primary-600);
            border-color: var(--primary-200);
        }

        .btn-delete {
            color: #e53e3e;
            border-color: #fed7d7;
        }

        /* 表单对话框 */
        .form-dialog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .dialog-content {
            background-color: white;
            border-radius: 12px;
            width: 600px;
            max-width: 90%;
            box-shadow: var(--shadow-lg);
        }

        .dialog-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dialog-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-800);
        }

        .dialog-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-700);
        }

        .dialog-body {
            padding: 1.5rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-700);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(31, 191, 123, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-col {
            flex: 1;
        }

        .dialog-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        /* 分页 */
        .pagination {
            display: flex;
            justify-content: flex-end;
            margin-top: auto;
            padding-top: 1rem;
        }

        .pagination-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid var(--gray-300);
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 0.25rem;
        }

        .pagination-btn.active {
            background-color: var(--primary-500);
            color: white;
            border-color: var(--primary-500);
        }

        .pagination-btn:hover:not(.active) {
            background-color: var(--gray-100);
        }

        /* 响应式设计 */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                width: 100%;
                height: auto;
            }

            .content {
                height: auto;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-wrap: wrap;
            }

            .action-bar {
                flex-direction: column;
            }

            .search-form {
                width: 100%;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
<div id="app">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <span>AI智能体平台</span>
            </div>

            <div class="nav-links">
                <a href="index.html" class="nav-link">首页</a>
                <a href="#" class="nav-link">智能体开发</a>
                <a href="#" class="nav-link">模型接入</a>
                <a href="#" class="nav-link">向量库配置</a>
                <a href="#" class="nav-link active">知识库管理</a>
                <a href="#" class="nav-link">文档管理</a>
                <a href="#" class="nav-link">MCP管理</a>
            </div>

            <div class="user-section">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="搜索知识库...">
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user-circle" style="font-size: 1.8rem; color: rgba(255,255,255,0.85);"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="main-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <h3 class="sidebar-title">
                <i class="fas fa-cog"></i>
                知识库管理
            </h3>
            <ul class="sidebar-menu">
                <li class="menu-item active">
                    <i class="fas fa-list"></i>
                    <span>知识库列表</span>
                </li>
                <li class="menu-item">
                    <i class="fas fa-plus-circle"></i>
                    <span>新建知识库</span>
                </li>
                <li class="menu-item">
                    <i class="fas fa-database"></i>
                    <span>向量库管理</span>
                </li>
                <li class="menu-item">
                    <i class="fas fa-file-import"></i>
                    <span>文档导入</span>
                </li>
                <li class="menu-item">
                    <i class="fas fa-history"></i>
                    <span>操作日志</span>
                </li>
                <li class="menu-item">
                    <i class="fas fa-sliders-h"></i>
                    <span>设置</span>
                </li>
            </ul>
        </div>

        <!-- 内容区 -->
        <div class="content">
            <div class="content-header">
                <h2 class="content-title">
                    <i class="fas fa-book"></i>
                    知识库列表
                </h2>
                <button class="btn-primary" @click="openCreateDialog">
                    <i class="fas fa-plus"></i>
                    新建知识库
                </button>
            </div>

            <!-- 操作栏 -->
            <div class="action-bar">
                <div class="search-form">
                    <input type="text" class="form-control" placeholder="搜索知识库名称..." v-model="searchQuery">
                    <select class="form-control" v-model="statusFilter" style="width: 120px;">
                        <option value="all">全部状态</option>
                        <option value="1">启用</option>
                        <option value="0">禁用</option>
                    </select>
                    <button class="btn-primary" @click="fetchAdvisors">
                        <i class="fas fa-search"></i>
                        搜索
                    </button>
                </div>
                <div>
                    <button class="btn-primary" @click="exportData">
                        <i class="fas fa-download"></i>
                        导出数据
                    </button>
                </div>
            </div>

            <!-- 知识库表格 -->
            <table class="advisor-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>顾问名称</th>
                    <th>顾问类型</th>
                    <th>顺序号</th>
                    <th>向量库ID</th>
                    <th>模型ID</th>
                    <th>状态</th>
                    <th>创建时间</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="advisor in advisors" :key="advisor.id">
                    <td>{{ advisor.id }}</td>
                    <td>{{ advisor.advisorName }}</td>
                    <td>{{ advisor.advisorType }}</td>
                    <td>{{ advisor.orderNum }}</td>
                    <td>{{ advisor.databaseId || '-' }}</td>
                    <td>{{ advisor.embeddingModelId || '-' }}</td>
                    <td>
                                <span :class="['status-badge', advisor.status === 1 ? 'status-enabled' : 'status-disabled']">
                                    {{ advisor.status === 1 ? '启用' : '禁用' }}
                                </span>
                    </td>
                    <td>{{ formatDate(advisor.createTime) }}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn btn-edit" @click="openEditDialog(advisor)">
                                <i class="fas fa-edit"></i> 编辑
                            </button>
                            <button class="action-btn btn-delete" @click="confirmDelete(advisor)">
                                <i class="fas fa-trash-alt"></i> 删除
                            </button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- 分页 -->
            <div class="pagination">
                <button class="pagination-btn" :disabled="currentPage === 1" @click="prevPage">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button v-for="page in totalPages" :key="page"
                        class="pagination-btn"
                        :class="{ 'active': currentPage === page }"
                        @click="goToPage(page)">
                    {{ page }}
                </button>
                <button class="pagination-btn" :disabled="currentPage === totalPages" @click="nextPage">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- 新增/编辑对话框 -->
    <div class="form-dialog" v-if="showDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">{{ dialogTitle }}</h3>
                <button class="dialog-close" @click="closeDialog">&times;</button>
            </div>
            <div class="dialog-body">
                <div class="form-group">
                    <label class="form-label">顾问名称</label>
                    <input type="text" class="form-control" v-model="currentAdvisor.advisorName" placeholder="请输入顾问名称">
                </div>

                <div class="form-row">
                    <div class="form-col">
                        <label class="form-label">顾问类型</label>
                        <select class="form-control" v-model="currentAdvisor.advisorType">
                            <option value="PromptChatMemory">PromptChatMemory</option>
                            <option value="RagAnswer">RagAnswer</option>
                            <option value="SimpleLoggerAdvisor">SimpleLoggerAdvisor</option>
                        </select>
                    </div>
                    <div class="form-col">
                        <label class="form-label">顺序号</label>
                        <input type="number" class="form-control" v-model="currentAdvisor.orderNum" min="0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-col">
                        <label class="form-label">向量库ID</label>
                        <input type="number" class="form-control" v-model="currentAdvisor.databaseId" placeholder="请输入向量库ID">
                    </div>
                    <div class="form-col">
                        <label class="form-label">模型ID</label>
                        <input type="number" class="form-control" v-model="currentAdvisor.embeddingModelId" placeholder="请输入模型ID">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">状态</label>
                    <div>
                        <label class="form-radio">
                            <input type="radio" v-model="currentAdvisor.status" :value="1">
                            <span>启用</span>
                        </label>
                        <label class="form-radio">
                            <input type="radio" v-model="currentAdvisor.status" :value="0">
                            <span>禁用</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">扩展参数 (JSON)</label>
                    <textarea class="form-control" v-model="currentAdvisor.extParam" rows="4" placeholder="请输入扩展参数配置（JSON格式）"></textarea>
                </div>
            </div>
            <div class="dialog-footer">
                <button class="action-btn" @click="closeDialog">取消</button>
                <button class="btn-primary" @click="saveAdvisor">{{ isEditing ? '更新' : '创建' }}</button>
            </div>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, reactive, onMounted } = Vue;

    createApp({
        setup() {
            // 知识库数据
            const advisors = ref([]);
            const currentAdvisor = reactive({
                id: null,
                advisorName: '',
                advisorType: 'PromptChatMemory',
                orderNum: 0,
                extParam: '',
                databaseId: null,
                embeddingModelId: null,
                status: 1
            });

            // 页面状态
            const showDialog = ref(false);
            const isEditing = ref(false);
            const dialogTitle = ref('新建知识库');
            const searchQuery = ref('');
            const statusFilter = ref('all');

            // 分页状态
            const currentPage = ref(1);
            const pageSize = ref(10);
            const totalItems = ref(0);
            const totalPages = ref(1);

            // 格式化日期
            const formatDate = (dateString) => {
                if (!dateString) return '';
                const date = new Date(dateString);
                return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            };

            // 获取知识库列表
            const fetchAdvisors = async () => {
                try {
                    // 模拟API请求
                    console.log('Fetching advisors...');

                    // 实际API调用应该像这样：
                    /*
                    const response = await axios.post('/api/v1/ai/admin/client/advisor/queryClientAdvisorList', {
                        pageNum: currentPage.value,
                        pageSize: pageSize.value,
                        advisorName: searchQuery.value,
                        status: statusFilter.value === 'all' ? null : Number(statusFilter.value)
                    });

                    advisors.value = response.data;
                    totalItems.value = response.data.total; // 假设后端返回总数
                    */

                    // 模拟数据
                    advisors.value = [
                        {
                            id: 1,
                            advisorName: '客户支持知识库',
                            advisorType: 'RagAnswer',
                            orderNum: 1,
                            databaseId: 101,
                            embeddingModelId: 201,
                            status: 1,
                            createTime: '2023-10-15T08:30:00Z',
                            updateTime: '2023-10-20T14:25:00Z'
                        },
                        {
                            id: 2,
                            advisorName: '产品文档知识库',
                            advisorType: 'PromptChatMemory',
                            orderNum: 2,
                            databaseId: 102,
                            embeddingModelId: 202,
                            status: 1,
                            createTime: '2023-09-22T10:15:00Z',
                            updateTime: '2023-10-18T09:45:00Z'
                        },
                        {
                            id: 3,
                            advisorName: '技术问题知识库',
                            advisorType: 'SimpleLoggerAdvisor',
                            orderNum: 3,
                            databaseId: 103,
                            embeddingModelId: 203,
                            status: 0,
                            createTime: '2023-11-05T13:40:00Z',
                            updateTime: '2023-11-10T16:20:00Z'
                        }
                    ];

                    totalItems.value = 3;
                    totalPages.value = 1;

                } catch (error) {
                    console.error('获取知识库列表失败:', error);
                    // 这里应该显示错误提示
                }
            };

            // 打开新建对话框
            const openCreateDialog = () => {
                // 重置表单
                Object.assign(currentAdvisor, {
                    id: null,
                    advisorName: '',
                    advisorType: 'PromptChatMemory',
                    orderNum: 0,
                    extParam: '',
                    databaseId: null,
                    embeddingModelId: null,
                    status: 1
                });

                isEditing.value = false;
                dialogTitle.value = '新建知识库';
                showDialog.value = true;
            };

            // 打开编辑对话框
            const openEditDialog = (advisor) => {
                // 复制当前选中的知识库
                Object.assign(currentAdvisor, advisor);

                isEditing.value = true;
                dialogTitle.value = '编辑知识库';
                showDialog.value = true;
            };

            // 关闭对话框
            const closeDialog = () => {
                showDialog.value = false;
            };

            // 保存知识库（新增或更新）
            const saveAdvisor = async () => {
                try {
                    if (isEditing.value) {
                        // 更新知识库
                        console.log('Updating advisor:', currentAdvisor);

                        // 实际API调用：
                        /*
                        const response = await axios.post('/api/v1/ai/admin/client/advisor/updateClientAdvisor', currentAdvisor);
                        if (response.data) {
                            // 更新成功
                        }
                        */
                    } else {
                        // 新增知识库
                        console.log('Creating advisor:', currentAdvisor);

                        // 实际API调用：
                        /*
                        const response = await axios.post('/api/v1/ai/admin/client/advisor/addClientAdvisor', currentAdvisor);
                        if (response.data) {
                            // 新增成功
                        }
                        */
                    }

                    // 刷新列表
                    fetchAdvisors();
                    closeDialog();

                } catch (error) {
                    console.error('保存知识库失败:', error);
                }
            };

            // 删除确认
            const confirmDelete = (advisor) => {
                if (confirm(`确定要删除知识库 "${advisor.advisorName}" 吗？`)) {
                    deleteAdvisor(advisor.id);
                }
            };

            // 删除知识库
            const deleteAdvisor = async (id) => {
                try {
                    console.log('Deleting advisor ID:', id);

                    // 实际API调用：
                    /*
                    const response = await axios.get(`/api/v1/ai/admin/client/advisor/deleteClientAdvisor?id=${id}`);
                    if (response.data) {
                        // 删除成功
                    }
                    */

                    // 刷新列表
                    fetchAdvisors();

                } catch (error) {
                    console.error('删除知识库失败:', error);
                }
            };

            // 分页控制
            const prevPage = () => {
                if (currentPage.value > 1) {
                    currentPage.value--;
                    fetchAdvisors();
                }
            };

            const nextPage = () => {
                if (currentPage.value < totalPages.value) {
                    currentPage.value++;
                    fetchAdvisors();
                }
            };

            const goToPage = (page) => {
                currentPage.value = page;
                fetchAdvisors();
            };

            // 导出数据
            const exportData = () => {
                console.log('Exporting data...');
                // 这里可以实现导出逻辑
                alert('导出功能将在实际项目中实现');
            };

            // 初始化
            onMounted(() => {
                fetchAdvisors();
            });

            return {
                advisors,
                currentAdvisor,
                showDialog,
                isEditing,
                dialogTitle,
                searchQuery,
                statusFilter,
                currentPage,
                pageSize,
                totalPages,

                formatDate,
                fetchAdvisors,
                openCreateDialog,
                openEditDialog,
                closeDialog,
                saveAdvisor,
                confirmDelete,
                prevPage,
                nextPage,
                goToPage,
                exportData
            };
        }
    }).mount('#app');
</script>
</body>
</html>
